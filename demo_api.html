<!-- Th·ª≠ fetch API v·ªÅ t·ª´ API Free. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B·∫£o Ph√°t th·∫£o cho API</title>
</head>
<body>
    
</body>
<script>
    const getFilmAPI = () => {
        return new Promise((resolve, reject) => {
            const options = {method: 'GET', headers: {accept: 'application/json'}};
            const apiKey = '6f6bf7101ae6e531a8f5faa0c40418a5'; // Ph·∫£i m√£ ho√° sau n√†y.
            const url = 'https://api.themoviedb.org/3/movie/now_playing?api_key='+ apiKey + '&language=en-US&page=1';


            fetch(url, options)
                .then(res => {
                    if(!res.ok) {
                        throw new Error('L·ªñI API: KH√îNG C√ì PH·∫¢N H·ªíI')
                    }
                    return res.json(); 
                })
                .then(data => {
                    resolve(data.results)
                })
                .catch(error => {
                    reject(error)
                })
        })
    }

    getFilmAPI()
        .then(data => {
            console.log('ƒê√£ k·∫øt n·ªëi');
            
            for(let i = 0; i <= data.length; i++) {
                console.log('S·ªë phim ƒë√£ l·∫•y ƒë∆∞·ª£c: ' + (i+1));
                console.log(`üé¨ ${data[i].title}`);
                console.log(`‚≠ê Rate: ${data[i].vote_average}`);
                console.log(`üëÅ Views: ${data[i].popularity}`);
                console.log(`üìÖ L·ªãch chi·∫øu: ${data[i].release_date}`);
                console.log('-----------------------------');
            }
        })
        .catch(error => {
            console.log(error);  
        })
</script>
</html>